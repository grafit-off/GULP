document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".body"),t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=(document.documentElement.style,null!=navigator.userAgent.match(/iPhone/i)),n=null!=navigator.userAgent.match(/iPad/i),i=null!=navigator.userAgent.match(/iPod/i);let c=()=>{let e=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=e,document.body.style.top=-e+"px"},l=()=>{let e=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:e,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const s=document.querySelectorAll(".animate-item");if(t)s.forEach(e=>{e.classList.add("animated")});else{const e=(e,t,o,n=0)=>{let i=e.getBoundingClientRect();e.dataset.delay&&(n=e.dataset.delay),i.top+i.height-i.height*o>0&&window.innerHeight-i.top-i.height*t>0?(e.classList.add("animated"),e.style.transitionDelay=n+"s"):e.hasAttribute("data-animation-once")||e.classList.remove("animated")};0!=s.length&&(s.forEach(t=>{e(t,.5,.5)}),document.addEventListener("scroll",()=>{s.forEach(t=>{e(t,.5,.5)})}))}const d=document.querySelectorAll(".modal-btn"),a=document.querySelectorAll(".fixed-padding"),r=document.querySelectorAll(".close-modal");let u,m,h,g=!0,p=!1;if(d.length>0)for(let e=0;e<d.length;e++){const t=d[e];t.addEventListener("click",(function(e){const o=t.dataset.path,n=document.getElementById(o);null!=n?(y(n),setTimeout(()=>{r.forEach(e=>{e.focus()})},100),e.preventDefault()):console.log("Модальное окно не существует! "+n)}))}if(r.length>0)for(let e=0;e<r.length;e++){const t=r[e];u=t,t.addEventListener("click",(function(e){f(t.closest(".modal")),e.preventDefault()}))}function y(t){if(t&&g){h=document.activeElement;const l=document.querySelector(".modal.open");l?f(l,!1):function(){const t=window.innerWidth-e.offsetWidth+"px";if(a.length>0)for(let e=0;e<a.length;e++){a[e].style.paddingRight=t}e.style.paddingRight=t,e.classList.contains("lock")?m=!1:(m=!0,o||n||i?c():e.classList.add("lock"));g=!1,setTimeout((function(){g=!0}),800)}(),t.classList.add("open"),t.addEventListener("mousedown",(function(e){!1===p?(e.target.closest(".modal__content")||f(e.target.closest(".modal")),p=!0):setTimeout(()=>{p=!1},800)}))}}function f(t,c=!0){g&&(t.classList.remove("open"),c&&setTimeout((function(){if(a.length>0)for(let e=0;e<a.length;e++)a[e].style.paddingRight="0px";e.style.paddingRight="0px",1==m&&(o||n||i?l():e.classList.remove("lock"))}),800)),setTimeout((function(){h.focus()}),800)}document.addEventListener("keydown",(function(e){if(document.querySelector(".modal.open")&&27===e.which){f(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)});const accordionTriggers=document.querySelectorAll(".accordion__trigger"),accordionTriggerDisable=e=>{e.disabled=!0,setTimeout(()=>{e.disabled=!1},500)},accordionOpen=(e,t)=>{t.style.height=t.scrollHeight+"px","0px"!==t.style.height&&"0px"!==window.getComputedStyle(t).height||(e.classList.add("accordion__trigger--active"),e.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),t.classList.remove("accordion__body--hidden"))},accordionClose=(e,t)=>{"0px"!==t.style.height&&"0px"!==window.getComputedStyle(t).height&&(e.classList.remove("accordion__trigger--active"),e.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"),t.style.height=t.scrollHeight+"px",setTimeout(()=>{t.style.height="0"},0),setTimeout(()=>{t.classList.add("accordion__body--hidden")},500))},setHeightOnTransitionEnd=e=>{e.addEventListener("transitionend",()=>{"0px"!==e.style.height&&(e.style.height="auto")})},accordionToggle=e=>{const t=e,o=e.closest(".accordion__item").querySelector(".accordion__body");accordionTriggerDisable(t),setHeightOnTransitionEnd(o),accordionClose(t,o),accordionOpen(t,o)};accordionTriggers.forEach(e=>{e.addEventListener("click",e=>{let t=e.currentTarget;accordionToggle(t)})});
//# sourceMappingURL=main.js.map
