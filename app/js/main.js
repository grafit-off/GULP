document.addEventListener("DOMContentLoaded",()=>{let e=()=>{let e=window.scrollY;document.querySelector("html").style.scrollBehavior="auto",document.body.classList.add("ios-lock"),document.body.dataset.position=e,document.body.style.top=-e+"px"},t=()=>{let e=parseInt(document.body.dataset.position,10);document.body.style.top="auto",document.body.classList.remove("ios-lock"),window.scroll({top:e,left:0}),document.querySelector("html").removeAttribute("style"),document.body.removeAttribute("data-position")};const o=document.querySelectorAll(".animate-item"),n=(e,t,o)=>{let n=e.getBoundingClientRect();n.top+n.height-n.height*o>0&&window.innerHeight-n.top-n.height*t>0?e.classList.add("animated"):e.hasAttribute("data-animation-once")||e.classList.remove("animated")};0!=o.length&&(o.forEach(e=>{n(e,.5,.5)}),document.addEventListener("scroll",()=>{o.forEach(e=>{n(e,.5,.5)})}));const l=document.querySelectorAll(".modal-btn"),c=document.querySelectorAll(".fixed-padding"),i=document.querySelectorAll(".close-modal");let s,d,a,r=!0;if(0===c.length&&console.log('@MODALS: "Класс "fixed-padding" нигде не был указан!"'),l.length>0)for(let e=0;e<l.length;e++){const t=l[e];t.addEventListener("click",(function(e){const o=t.dataset.path,n=document.getElementById(o);null!=n?(console.log("Открыто модальное окно: "+o),m(n),setTimeout(()=>{i.forEach(e=>{e.focus()})},100),e.preventDefault()):console.log("Модальное окно не существует! "+n)}))}if(i.length>0)for(let e=0;e<i.length;e++){const t=i[e];s=t,t.addEventListener("click",(function(e){u(t.closest(".modal")),e.preventDefault()}))}function m(t){if(t&&r){a=document.activeElement;const o=document.querySelector(".modal.open");o?u(o,!1):function(){const t=window.innerWidth-body.offsetWidth+"px";if(c.length>0)for(let e=0;e<c.length;e++){c[e].style.paddingRight=t}body.style.paddingRight=t,body.classList.contains("lock")?d=!1:(d=!0,isiPhone||isiPad||isiPod?e():body.classList.add("lock"));r=!1,setTimeout((function(){r=!0}),800)}(),t.classList.add("open"),t.addEventListener("mousedown",(function(e){e.target.closest(".modal__content")||u(e.target.closest(".modal"))}))}}function u(e,o=!0){r&&(e.classList.remove("open"),o&&setTimeout((function(){if(c.length>0)for(let e=0;e<c.length;e++)c[e].style.paddingRight="0px";body.style.paddingRight="0px",1==d&&(isiPhone||isiPad||isiPod?t():body.classList.remove("lock"))}),800)),setTimeout((function(){a.focus()}),800)}document.addEventListener("keydown",(function(e){if(document.querySelector(".modal.open")&&27===e.which){u(document.querySelector(".modal.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)});
//# sourceMappingURL=main.js.map
