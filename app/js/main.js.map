{"version":3,"sources":["main.js"],"names":["document","addEventListener","body","querySelector","test","navigator","userAgent","documentElement","style","window","matchMedia","console","log","modalButtons","querySelectorAll","lockPadding","modalCloseButtons","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","isMultipleClick","length","index","modalCurrentButton","e","modalName","dataset","path","curentModal","getElementById","modalOpen","setTimeout","forEach","el","focus","preventDefault","modalClose","closest","activeElement","modalActive","lockPaddingValue","innerWidth","offsetWidth","paddingRight","classList","contains","isiPhone","isiPad","isiPod","disableScroll","add","bodyLock","target","doUnlock","remove","enableScroll","which","Element","prototype","css","node","this","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],"mappings":"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","file":"main.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\t// Includes\r\n\t// // Variables\r\nconst body = document.querySelector('.body');\r\nconst isMobileDevice = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\nconst isSmoothScrollSupported = 'scrollBehavior' in document.documentElement.style;\r\nconst media = window.matchMedia(\"(max-width: 767px)\");;\r\n\t// // Functions\r\nfunction log() {\r\n\tconsole.log('Hello App');\r\n}\r\nlog();\r\n\r\nfunction showActiveLink(links, activeClass, offsetDifference) {\r\n\tfor (let i = links.length - 1; i >= 0; i--) {\r\n\t\tlet target = document.querySelector(links[i].hash);\r\n\t\tif (window.scrollY > target.offsetTop - offsetDifference) {\r\n\t\t\tif (document.querySelector(`.${activeClass}`)) {\r\n\t\t\t\tdocument.querySelector(`.${activeClass}`).classList.remove(`${activeClass}`);\r\n\t\t\t}\r\n\t\t\tlinks[i].classList.add(`${activeClass}`);\r\n\t\t\tbreak;\r\n\t\t} else {\r\n\t\t\tif (document.querySelector(`.${activeClass}`)) {\r\n\t\t\t\tdocument.querySelector(`.${activeClass}`).classList.remove(`${activeClass}`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction scrollToTarget(id, media) {\r\n\tconst target = document.querySelector(id);\r\n\tif (!isSmoothScrollSupported && target !== null) {\r\n\t\tconst bodyRect = document.body.getBoundingClientRect();\r\n\t\tconst elemRect = target.getBoundingClientRect();\r\n\t\tconst offset = elemRect.top - bodyRect.top;\r\n\r\n\t\tconst requestAnimFrame = (function () {\r\n\t\t\treturn window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {\r\n\t\t\t\twindow.setTimeout(callback, 1000 / 60);\r\n\t\t\t};\r\n\t\t})();\r\n\t\tMath.easeInOutQuad = function (t, b, c, d) {\r\n\t\t\tt /= d / 2;\r\n\t\t\tif (t < 1) {\r\n\t\t\t\treturn c / 2 * t * t + b\r\n\t\t\t}\r\n\t\t\tt--;\r\n\t\t\treturn -c / 2 * (t * (t - 2) - 1) + b;\r\n\t\t};\r\n\t\tfunction scrollToIos(to, callback, duration) {\r\n\t\t\tfunction move(amount) {\r\n\t\t\t\tdocument.documentElement.scrollTop = amount;\r\n\t\t\t\tdocument.body.parentNode.scrollTop = amount;\r\n\t\t\t\tdocument.body.scrollTop = amount;\r\n\t\t\t}\r\n\r\n\t\t\tfunction position() {\r\n\t\t\t\treturn document.documentElement.scrollTop || document.body.parentNode.scrollTop || document.body.scrollTop;\r\n\t\t\t}\r\n\t\t\tlet start = position(),\r\n\t\t\t\tchange = to - start,\r\n\t\t\t\tcurrentTime = 0,\r\n\t\t\t\tincrement = 20;\r\n\t\t\tduration = (typeof (duration) === 'undefined') ? 500 : duration;\r\n\r\n\t\t\tlet animateScroll = function () {\r\n\t\t\t\tcurrentTime += increment;\r\n\t\t\t\tlet val = Math.easeInOutQuad(currentTime, start, change, duration);\r\n\t\t\t\tmove(val);\r\n\t\t\t\tif (currentTime < duration) {\r\n\t\t\t\t\trequestAnimFrame(animateScroll);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (callback && typeof (callback) === 'function') {\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tanimateScroll();\r\n\t\t}\r\n\t\tscrollToIos(offset - 50, null, 500);\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (target !== null) {\r\n\t\tlet pos = target.offsetTop - (media.matches ? 50 : 80);\r\n\t\twindow.scrollTo({\r\n\t\t\ttop: pos,\r\n\t\t\tbehavior: 'smooth'\r\n\t\t});\r\n\t}\r\n};\r\n\t// // MODAL\r\n// vars\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.fixed-padding');\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet isMultipleClick = false;\r\nlet bodyWasNotLock;\r\n\r\n// Проверки\r\nif (typeof (disableScroll) !== 'function' && typeof (enableScroll) !== 'function') {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)} и ${typeof (enableScroll)}\"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`);\r\n}\r\n// -- //\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Модальное окно не существует! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (isMultipleClick === false) {\r\n\t\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t\t}\r\n\t\t\t\tisMultipleClick = true;\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tisMultipleClick = false;\r\n\t\t\t\t}, timeout);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\n\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tenableScroll();\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();;\r\n\t// -- //\r\n})"]}