{"version":3,"sources":["main.js"],"names":["disableScroll","pagePosition","window","scrollY","document","querySelector","style","scrollBehavior","body","classList","add","dataset","position","top","enableScroll","parseInt","remove","scroll","left","removeAttribute","scrollLock_BtnListener","item","addEventListener","e","toggle","contains","console","log","animItems","querySelectorAll","elementInViewport","element","offsetTop","offsetBottom","bounds","getBoundingClientRect","height","innerHeight","hasAttribute","length","forEach","el","modalButtons","lockPadding","modalCloseButtons","timeout","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","index","modalCurrentButton","modalName","path","curentModal","getElementById","modalOpen","setTimeout","focus","preventDefault","modalClose","closest","activeElement","modalActive","bodyLock","target","doUnlock","bodyUnlock","lockPaddingValue","innerWidth","offsetWidth","paddingRight","isiPhone","isiPad","isiPod","which","Element","prototype","css","node","this","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],"mappings":"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","file":"main.js","sourcesContent":["// Includes\n// // scrollLockIOS\r\n// Выключение скролла\r\nlet disableScroll = () => {\r\n\tlet pagePosition = window.scrollY;\r\n\tdocument.querySelector('html').style.scrollBehavior = 'auto';\r\n\tdocument.body.classList.add('ios-lock');\r\n\tdocument.body.dataset.position = pagePosition;\r\n\tdocument.body.style.top = -pagePosition + 'px';\r\n}\r\n\r\n// Включение скролла\r\nlet enableScroll = () => {\r\n\tlet pagePosition = parseInt(document.body.dataset.position, 10);\r\n\tdocument.body.style.top = 'auto';\r\n\tdocument.body.classList.remove('ios-lock');\r\n\twindow.scroll({ top: pagePosition, left: 0 });\r\n\tdocument.querySelector('html').removeAttribute('style');\r\n\tdocument.body.removeAttribute('data-position');\r\n}\r\n\r\n// Слушатель на один элемент\r\nlet scrollLock_BtnListener = (item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\titem.classList.toggle('scroll')\r\n\t\tif (item.classList.contains('scroll')) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tenableScroll();\r\n\t\t}\r\n\t});\r\n};\n// // Animate In Scroll\r\n// class=\"animate-item\" data-animation='from-left' data-animation-once\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n\tconsole.log(\"DOM fully loaded and parsed\");\r\n\r\n\tconst animItems = document.querySelectorAll(\".animate-item\");\r\n\r\n\tconst elementInViewport = (element, offsetTop, offsetBottom) => {\r\n\t\tlet bounds = element.getBoundingClientRect();\r\n\t\tif ((bounds.top + bounds.height - bounds.height * offsetBottom > 0) && (window.innerHeight - bounds.top - bounds.height * offsetTop > 0)) {\r\n\t\t\telement.classList.add(\"animated\");\r\n\t\t} else if (!element.hasAttribute(\"data-animation-once\")) {\r\n\t\t\telement.classList.remove(\"animated\");\r\n\t\t}\r\n\t};\r\n\r\n\tif (animItems.length != 0) {\r\n\t\tanimItems.forEach(el => {\r\n\t\t\telementInViewport(el, .5, .5);\r\n\t\t})\r\n\t\tdocument.addEventListener('scroll', () => {\r\n\t\t\tanimItems.forEach(el => {\r\n\t\t\t\telementInViewport(el, .5, .5);\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n});\r\n// -- //\r\n\r\n/*\r\n// OLD\r\nconst scrollAnimate = () => {\r\n\t// let windowCenter = (window.innerHeight / 2) + window.scrollY;\r\n\tlet windowBottom = window.innerHeight + window.scrollY - 300;\r\n\tanimItems.forEach((el) => {\r\n\t\tlet scrollOffset = el.offsetTop;\r\n\t\tif (windowBottom >= scrollOffset) {\r\n\t\t\tel.classList.add('animated')\r\n\t\t} else {\r\n\t\t\tlet animationRepeat = el.hasAttribute('data-animation-once');\r\n\t\t\tif (!animationRepeat) {\r\n\t\t\t\tel.classList.remove('animated')\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nif (animItems.length != 0) {\r\n\tconsole.log('@ANIMATEONSCROLL: ON')\r\n\tscrollAnimate()\r\n\twindow.addEventListener('scroll', () => {\r\n\t\tscrollAnimate()\r\n\r\n\t})\r\n} else {\r\n\tconsole.log('@ANIMATEONSCROLL: \"На странице нету елементов анимации, НО функция scrollAnimate включена! Возможно вам стоит её отключить?\"')\r\n}\r\n*/;\n// const body = document.querySelector('body')\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.fixed-padding');\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet bodyWasNotLock;\r\n\r\n// Проверки\r\nif (lockPadding.length == 0) {\r\n\tconsole.log('@MODALS: \"Класс \"fixed-padding\" нигде не был указан!\"')\r\n}\r\nif (typeof (disableScroll) == 'function' && typeof (enableScroll)) {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)}\"! @scrollLockIOS: ON`);\r\n} else {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)} и ${typeof (enableScroll)}\"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`);\r\n}\r\n// -- //\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tconsole.log(`Открыто модальное окно: ${modalName}`);\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Такого модального окна нету! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (typeof (disableScroll) === \"function\") {\r\n\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tdisableScroll();\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.add('lock');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\n\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\t\t\tif (typeof (enableScroll) === \"function\") {\r\n\t\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\t\tenableScroll();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();;\n// -- //\n"]}